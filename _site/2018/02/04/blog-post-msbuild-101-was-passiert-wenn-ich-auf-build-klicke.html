<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Blog post to my talk “MSBuild 101 – Was passiert wenn ich auf „Build“ klicke” | SabotageAndi Blog</title>
    <meta name="description" content="Personal blog migrated from Hugo to Jekyll">
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <header>
      <h1><a href="/">SabotageAndi Blog</a></h1>
    </header>
    <main>
      <p>Last Monday (30. January) a colleague and I gave a talk about the basics of MSBuild. So that also others can enjoy my explanations, I wrote this post.</p>

<p>All examples can be found here:</p>

<h1 id="classic-hello-world">Classic Hello World</h1>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"Hello World!"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>Command: msbuild %Filename%.csproj /t:HelloWorld</p>

<p>That’s the classic “Hello World” as for every programming language. And yes, MSBuild looks like XML, but it’s a programming language. “Target” defines a “method”, which can call other targets and tasks. Tasks are functions that are defined in assemblies.</p>

<p>With the /t parameter, you specific which target is executed. When you don’t specify it, a default target is executed, but in this case, we want that the “HelloWorld” target is executed and print “Hello World!”.</p>

<h1 id="variables">Variables</h1>
<p>As functions/methods there are also variables in MSBuild. You define them in PropertyGroups.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;PropertyGroup&gt;</span>
        <span class="nt">&lt;HelloText&gt;</span>World<span class="nt">&lt;/HelloText&gt;</span>
    <span class="nt">&lt;/PropertyGroup&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"Hello $(HelloText)!"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>You can access them with $(%VariableName%).</p>

<h1 id="parameters">Parameters</h1>
<p>To get some data from outside into your MSBuild script, you can pass parameters with /p and access them as other variables.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"Hello $(HelloText)!"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>Command: msbuild HelloParameter.csproj /t:HelloWorld /p:HelloText=Internet</p>

<h1 id="ifs-aka-conditions">Ifs aka Conditions</h1>
<p>And as in other languages, there are also Ifs available. Here are they called Conditions and</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;PropertyGroup&gt;</span>
        <span class="nt">&lt;HelloText</span> <span class="na">Condition=</span><span class="s">"$(HelloText)==''"</span><span class="nt">&gt;</span>World<span class="nt">&lt;/HelloText&gt;</span>
    <span class="nt">&lt;/PropertyGroup&gt;</span>


    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"Hello $(HelloText)!"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>You can add the Condition element on nearly everything. It could be variables, whole property groups, targets or tasks.</p>

<p>This example uses conditions to set the variable “HelloText” to a default value if it wasn’t defined via parameter.</p>

<h1 id="multiple-targets">multiple Targets</h1>
<p>Who wants to write everything in a single method? Nobody. But nothing stops you to write more targets.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;CallTarget</span> <span class="na">Targets=</span><span class="s">"PrintHello"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;CallTarget</span> <span class="na">Targets=</span><span class="s">"PrintWorld"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;CallTarget</span> <span class="na">Targets=</span><span class="s">"PrintExclamationMark"</span><span class="nt">/&gt;</span>        
    <span class="nt">&lt;/Target&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"PrintHello"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"Hello"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"PrintWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"World"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"PrintExclamationMark"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"!"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>With the “CallTarget” task you can execute other targets.</p>

<h1 id="events">“Events”</h1>
<p>Sometimes you can not add a “CallTarget” to get your own code executed in MSBuild. For that there is a feature, that you can also trigger your targets before or after another target.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"Hello World!"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>


    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"Before"</span> <span class="na">BeforeTargets=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"BeforeHelloWorld"</span> <span class="nt">/&gt;</span>        
    <span class="nt">&lt;/Target&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"After"</span> <span class="na">AfterTargets=</span><span class="s">"HelloWorld"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"AfterHelloWorld"</span> <span class="nt">/&gt;</span>        
    <span class="nt">&lt;/Target&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>With setting the Before/After- Targets elements you register your target to be executed before or after the target. Real nice feature to hang your targets into the existing lifecycle of compiling a project.</p>

<h1 id="files">Files</h1>
<p>Sometimes you need to execute a target for a list of files. This is possible with ItemGroups.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;ItemGroup&gt;</span>
        <span class="nt">&lt;Files</span> <span class="na">Include=</span><span class="s">"*.*"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/ItemGroup&gt;</span>

    <span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"HelloWorld"</span>
            <span class="na">Inputs=</span><span class="s">"@(Files)"</span>
            <span class="na">Outputs=</span><span class="s">"%(Identity).Dummy"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Message</span> <span class="na">Text=</span><span class="s">"@(Files)"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Target&gt;</span>
   
<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>With ItemGroups you can define a variable that holds a list of files. You can include and exclude to this variable with additional entries in the ItemGroup.</p>

<p>To get a target executed per entry in a file variable, you have to use the Inputs and Outputs attributes. In difference to variables, you have to use @(…) and not $(…).
You have to set the Outputs attribute if you set the Inputs attribute. In this case, we can set it to %(Identity).Dummy, because we generate no output files.</p>

<h1 id="the-end-of-my-part">The end of my part</h1>
<p>So that was my part of the talk. My colleague Raoul Holzer continued with a little bit more advanced stuff. His examples can be found here: https://github.com/RaoulHolzer/MSBuild201 
And as soon he has written his blog post, I will link it here.</p>

    </main>
    <footer>
      <p>&copy; 2025 SabotageAndi Blog</p>
    </footer>
  </body>
</html>
